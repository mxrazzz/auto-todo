# ğŸ§© This is your GitHub Actions workflow file
# Every workflow file must live inside .github/workflows/
# The file extension is always .yml or .yaml (both work the same)

name: Python CI with Pytest # ğŸ·ï¸ This is just a name for the workflow (shows up in GitHub Actions tab)

on: # âš™ï¸ This defines WHEN the workflow runs
  push: # ğŸš€ Runs every time you push new code
    branches: [main] # ğŸ§  You can change this to any branch (e.g. 'dev')
  pull_request: # ğŸ‘€ Runs when someone opens or updates a pull request
    branches: [main]

jobs: # ğŸ§± A workflow is made up of one or more jobs
  build: # ğŸ§° We'll call this job "build"
    runs-on: ubuntu-latest # ğŸ’» This tells GitHub what OS to use in the cloud (Ubuntu VM)

    steps: # ğŸ“œ A job has multiple 'steps'
      - name: Checkout code # ğŸªœ Step 1: Get your code into the VM
        uses: actions/checkout@v4 # ğŸ§° Official GitHub action to clone your repo automatically

      - name: Set up Python # ğŸ§ª Step 2: Install Python on the runner
        uses: actions/setup-python@v5 # ğŸ§° Official action that installs any Python version
        with:
          python-version: "3.10" # ğŸ§  Always specify version â€” consistency matters in CI/CD

      - name: Install dependencies # ğŸ“¦ Step 3: Install the packages listed in requirements.txt
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
        # ğŸ§  This command now installs pytest, which we added to our requirements file.

      - name: Run tests with pytest # âœ… Step 4: Run your tests
        run: |
          pytest
        # ğŸ§  This is the key command. Pytest is smart and will automatically find
        # ğŸ§  any files named 'test_*.py' and run the test functions inside them.
        # ğŸ§  If any test fails, this step will fail, and GitHub will show a red 'X'.
